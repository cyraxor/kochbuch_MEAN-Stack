<app-navbar></app-navbar>

<div class="container">
  <div class="grid">
    <div *ngFor="let recept of recepts">
      <div class="col-auto">
        <div class="receptitem card mb-3 border border-start-0 border-top-0  border-end-0 border-3 rounded-3" data-container>
          <div class="row g-1">
            <div class="col-md-auto">
                <div class="card-body">
                  <h5 class="card-title text-wrap" style="height: 4rem;">
                      {{recept.title}}
                  </h5>
                </div>
            </div>
          </div>
          <div class="row g-2">
            <div class="col-md-auto">
                <!-- <a (click)="showRecept(receptId.value)" id="img-link" > -->
                <a (click)="showRecept(recept)" id="img-link" >
                  <input type="hidden" #receptId value="{{recept._id}}">
                  <img src="../../../assets/media/{{recept.pictureUrl}}"  class="card-img-top rounded-start" alt="...">
                </a>
            </div>
            <div class="col-md-12">
                <div class="card-body">
                  <div class="img-link">
                      <span style="white-space:nowrap">
                        <span (click)="clickFav()" class="fav-button" method = ""  user_id = "1" recept_id="" >
                            <i class="favicon fas fa-heart fav-icon fav-off" id=""></i>
                        </span>
                        <span *ngIf="recept.duration !== null" style="white-space:nowrap" class="card-text">Dauer: {{recept.duration}} Minuten
                            <div class="skeleton skeleton-text"></div>
                        </span>
                      </span>
                  </div>
                  <p class="card-text">
                      <small class="text-muted">Erstellt: {{recept.created | date: 'dd.MM.yyyy - hh:mm a'}}</small>
                      <span id="views" class="position-absolute bottom-5 end-0 translate-middle-x badge rounded-pill bg-primary" data-viewed>{{recept.clicks}}</span>
                  </p>
                </div>
            </div>
          </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="showOverlay" class="details-grid">
  <a (click)="hideRecept()">
    <div id='overlay' class="overlay-content">
      <div id='titel'>
        <div class="card" style="width: 100%;">
          <img src="../../../assets/media/{{currentRecept.pictureUrl}}" class="card-img-top rounded-start" alt="..." style="width: 90%">
          <div class="card-body">
            <div class="row">
              <div class="col-sm-7">
                <h1 class="card-title">{{currentRecept.title}}</h1>
                <br />
              </div>
            </div>
            <div class="card-text">
              <p><b>Zutaten:</b></p>
                <ul class="list-group-flush">
                  <li *ngFor="let item of ingredients">{{item.quantity}} {{item.unit}} {{item.ingredient}}</li>
                </ul>
            </div>
            <p>&nbsp;</p>
            <p *ngIf="preparation.length !== 0" class="card-text"><b>Zubereitung:</b></p>
            <div >
              <!-- <p class="card-text" id="preparation" *ngFor="let prep of preparation">{{prep.step}}</p> -->
              <div class="card-text" id="preparation" *ngFor="let prep of preparation">{{prep.step}}</div>
            </div>
          </div>
        </div>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
      </div>
    </div>
  </a>
</div>



<!--
  #########################################################
  #                                                       #
  #               Original old layout                     #
  #                                                       #
  #########################################################
-->

<!-- <div class="container" [ngClass]="{noscroll: test}">
  <div class="level-item">
    <div class="columns is-multiline is-mobile is-centered cards-container">
      <div class="column is-three-quarters-mobile is-two-thirds-tablet is-half-desktop is-one-third-widescreen is-one-quarter-fullhd" *ngFor="let recept of recepts">
        <div class="card">
          <a (click)="showRecept(receptId.value)">

            <input type="hidden" #receptId value="{{recept._id}}">
            <div class="card-image">
              <figure class="image">
                <img src="../../../assets/media/{{recept.pictureUrl}}" alt="Placeholder image">
              </figure>
            </div>
            <div class="card-content">

              <div class="content">
                <p class="title is-5 ">{{recept.title}}</p>

              </div>
              <div class="media">
                <div class="media-left">
                  Dauer: {{recept.duration}} Minuten
                </div>
                <div class="media-content">
                  <p class="subtitle is-6">{{recept.description}}</p>
                </div>
              </div>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>
</div> -->
<!-- <div *ngIf="showOverlay" class="overlay-container">
  <a (click)="hideRecept()">
    <div class="overlay-content" >
      <div class="card">
        <div class="media-content has-text-justified">
          <p class="title is-2">{{currentRecept.title}}</p><br>
        </div>
        <div class="card-image">
          <figure >
            <img src="../../../assets/media/{{currentRecept.pictureUrl}}" alt="Placeholder image">
          </figure>
        </div>
        <div class="card-content">
          <div class="media">
            <div class="media-left">
            </div>
            <div class="media-content">
              <p class="title is-4">{{currentRecept.title}}</p>
              <p class="subtitle is-6"><a href="{{currentRecept.sourceUrl}}" target="_blank">Quelle</a></p>
            </div>
          </div>
          <div class="content">
            <div class="columns">
              <div class="column">
                {{currentRecept.description}}
              </div>
              <div class="column">
                <p *ngIf="ingredients.length !== 0">{{ingredients.length}} Zutaten:</p>
                <ul >
                  <li *ngFor="let item of ingredients">{{item.quantity}} {{item.unit}} {{item.ingredient}}</li>
                </ul>
                <p></p>
              </div>
            </div>
          </div>
          <div class="content">
            <div class="columns">
              <h3 *ngIf="preparation.length !== 0">Zubereitung</h3>
              <p *ngFor="let prep of preparation">{{prep.step}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </a>
</div> -->
